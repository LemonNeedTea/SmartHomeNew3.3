{"version":3,"sources":["../../src/pages/device-setting/HuaiAn/curtain-setting-huaian/curtain-setting-huaian.module.ts","../../src/pages/device-setting/HuaiAn/curtain-setting-huaian/curtain-setting-huaian.ts"],"names":[],"mappings":"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","file":"50.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CurtainSettingHuaianPage } from './curtain-setting-huaian';\nimport { ComponentsModule } from '../../../../components/components.module';\n\n@NgModule({\n  declarations: [\n    CurtainSettingHuaianPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CurtainSettingHuaianPage),\n    ComponentsModule\n  ],\n})\nexport class CurtainSettingHuaianPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/device-setting/HuaiAn/curtain-setting-huaian/curtain-setting-huaian.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events } from 'ionic-angular';\nimport { Variable } from '../../../../providers/model/variable';\nimport { DeviceRequestsProvider } from '../../../../providers/tools/requests'\n\n/**\n * Generated class for the CurtainSettingHuaianPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-curtain-setting-huaian',\n  templateUrl: 'curtain-setting-huaian.html',\n})\nexport class CurtainSettingHuaianPage {\n\n  name: string;\n  id: number;\n  state: number;\n  auto: boolean;\n  fnID: string;\n  saturation: number = 0;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    private events: Events,\n    private device: DeviceRequestsProvider\n  ) {\n    this.id = this.navParams.get(\"id\");\n    this.name = this.navParams.get(\"name\");\n\n    // this.device.getDeviceGetInfoDataByID(this.id).then(res => {\n    // this.fnID = res[\"F_FnID\"];\n    this.fnID = '72';\n    let fnData = Variable.GetFnData(this.fnID);\n    this.getDeviceState(fnData);\n    this.events.subscribe(`FnData:${this.fnID}`, this.eventsFn72Handler);\n    // });\n  }\n  /**start**/\n  private eventsFn72Handler = (data: any) => {\n    this.getDeviceState(data);\n  }\n  /**end***/\n\n  ionViewDidLoad() {\n  }\n  getDeviceState(data: any) {\n    if (data) {\n      let state = data.F7210;\n      let kaidu = data.F729;\n\n      if (this.setInfo) {\n        if (kaidu == this.setInfo.kaidu && state == this.setInfo.state) {\n          // debugger;\n\n          this.state = state;\n          this.saturation = kaidu;\n          this.dismissLoading();\n\n        }\n      } else {\n        this.state = state;\n        this.saturation = kaidu;\n      }\n\n    }\n  }\n  dismissLoading() {\n    this.setInfo = null;\n    Variable.socketObject.dismissLoading();\n  }\n\n  setInfo: any;\n  setDeviceState(kaidu: number, state: number) {\n    // this.state = state;\n    // let params = new CurtainHuaiAn();//注意组装顺序\n    // params.KaiDu = Number(kaidu);\n    // params.State = Number(state);\n    // Variable.socketObject.setTimer(params, '', 61);\n    this.setInfo = {\n      kaidu: kaidu,\n      state: state\n    };\n    Variable.socketObject.setCurtain(`10,${kaidu},${state}`, 1, 61, false);\n\n  }\n\n  ionViewDidLeave() {\n    this.events.unsubscribe(`FnData:${this.fnID}`, this.eventsFn72Handler);\n    // this.events.unsubscribe(\"FnData:isAuto\", this.eventsFnAutoHandler);\n\n  }\n\n  timerObj: any;\n  rangeChange() {\n    // console.log(this.saturation);\n    // this.setDeviceState(this.saturation, 1);\n\n    if (!this.timerObj) {\n      this.timerObj = setTimeout(() => {\n        // console.log(this.saturation);\n        this.setDeviceState(this.saturation, 1);\n        clearTimeout(this.timerObj);\n        this.timerObj = null;\n      }, 1000);\n    }\n\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/device-setting/HuaiAn/curtain-setting-huaian/curtain-setting-huaian.ts"],"sourceRoot":""}