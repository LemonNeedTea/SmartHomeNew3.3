{"version":3,"sources":["../../src/pages/device-setting/HuaiAn/light-huaian-setting/light-huaian-setting.module.ts","../../src/pages/device-setting/HuaiAn/light-huaian-setting/light-huaian-setting.ts"],"names":[],"mappings":"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","file":"49.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LightHuaianSettingPage } from './light-huaian-setting';\nimport { ComponentsModule } from '../../../../components/components.module';\n\n@NgModule({\n  declarations: [\n    LightHuaianSettingPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LightHuaianSettingPage),\n    ComponentsModule\n  ],\n})\nexport class LightHuaianSettingPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/device-setting/HuaiAn/light-huaian-setting/light-huaian-setting.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events } from 'ionic-angular';\nimport { Variable } from '../../../../providers/model/variable';\nimport { DeviceRequestsProvider } from '../../../../providers/tools/requests'\n/**\n * Generated class for the LightHuaianSettingPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-light-huaian-setting',\n  templateUrl: 'light-huaian-setting.html',\n})\nexport class LightHuaianSettingPage {\n\n\n  /*\n          传递给颜色选择器组件初始化值\n          ----------------------------------------\n          colorPickerValue: 获取颜色的16进制值\n          colorPickerHeight: 设置颜色选择框的高度\n          colorPickerWidth: 设置颜色选择框的宽度\n          colorPickerBorderRadius: 设置颜色选择器的圆角\n      */\n  colorPickerHeight: number;\n  colorPickerWidth: number;\n  colorPickerBorderRadius: number;\n\n  name: string;\n  id: number;\n  state: number;\n  fnID: string;\n  brightness: number;\n  brightness1: number;\n\n  deviceFnData: any = {};\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, private events: Events,\n    private device: DeviceRequestsProvider) {\n    this.colorPickerWidth = window.innerWidth - 20;\n\n    this.colorPickerHeight = this.colorPickerWidth / 2;\n    this.colorPickerBorderRadius = 5;\n    this.id = this.navParams.get(\"id\");\n    this.name = this.navParams.get(\"name\");\n\n    if (this.id == 19) {//电视背景灯\n      this.deviceFnData = {\n        SeWenFnCode: 'F725',\n        LiangDuFnCode: 'F726',\n        SetCode: 1\n      };\n    } else if (this.id == 20) {\n      this.deviceFnData = {\n        SeWenFnCode: 'F727',\n        LiangDuFnCode: 'F728',\n        SetCode: 2\n      };\n    }\n\n    this.fnID = 'state';\n    let fnData = Variable.GetFnData(this.fnID);\n    this.getDeviceState(fnData);\n    this.events.subscribe(`FnData:${this.fnID}`, this.eventsFnStateHandler);\n\n    let fn72Data = Variable.GetFnData('72');\n    this.getLightState(fn72Data);\n    this.events.subscribe(`FnData:72`, this.eventsFn72Handler);\n\n  }\n  // 颜色选择器中事件，传递出来的值。\n  colorPickerFun(event) {\n    let color = event;\n    let data = `3,${this.deviceFnData.SetCode},${3},255,${color.r},1,255,${color.g},1,255,${color.b},1`;\n    console.log(data);\n    Variable.socketObject.setAir(data, 1, 61);\n  }\n\n  /**start**/\n  private eventsFnStateHandler = (data: any) => {\n    this.getDeviceState(data);\n  }\n  private eventsFn72Handler = (data: any) => {\n    this.getLightState(data);\n  }\n  /**end***/\n\n  ionViewDidLoad() {\n  }\n  setInfo: any = null;\n  getLightState(data: any) {\n    if (data) {\n      let color = data[this.deviceFnData.SeWenFnCode];//色温\n      let brightness = data[this.deviceFnData.LiangDuFnCode];//亮度\n      if (this.setInfo) {\n        if (this.setInfo.type == 'color') {\n          if (this.setInfo.data == color) {\n            this.brightness1 = color;//色温\n            this.setInfo = null;\n\n          }\n        } else if (this.setInfo.type == 'brightness') {\n          if (this.setInfo.data == brightness) {\n            this.brightness = brightness;//色温\n            this.setInfo = null;\n\n          }\n        }\n      } else {\n        this.brightness1 = color;//色温\n        this.brightness = brightness;//亮度\n      }\n\n    }\n\n    // console.log(data);\n\n  }\n  getDeviceState(data: any) {\n    if (data) {\n      this.state = data[this.id][0];\n\n    }\n  }\n  setDeviceState(state: any) {\n    this.state = state;\n    Variable.socketObject.setDeviceState(this.id, this.name, state);\n  }\n  ionViewDidLeave() {\n    this.events.unsubscribe(`FnData:${this.fnID}`, this.eventsFnStateHandler);\n    this.events.unsubscribe(`FnData:72`, this.eventsFn72Handler);\n\n  }\n  brightnessChange(data: any) {\n    let id = 2;\n    this.setLight(id, this.brightness);\n    this.setInfo = {\n      type: 'brightness',\n      data: this.brightness\n    };\n\n  }\n  colorChange(data: any) {\n    let id = 1;\n    this.setLight(id, this.brightness1);\n    this.setInfo = {\n      type: 'color',\n      data: this.brightness1\n    };\n  }\n  setLight(id: number, value: number) {\n    let data = `3,${this.deviceFnData.SetCode},${id},${value}`;//42 主机标号 模式 参数\n    console.log(data);\n    Variable.socketObject.setCurtain(data, 1, 61, false);\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/device-setting/HuaiAn/light-huaian-setting/light-huaian-setting.ts"],"sourceRoot":""}