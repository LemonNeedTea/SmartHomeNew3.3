{"version":3,"sources":["../../src/pages/wellpump/wellpump.module.ts","../../src/pages/wellpump/wellpump.ts"],"names":[],"mappings":"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","file":"17.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { WellpumpPage } from './wellpump';\nimport { ComponentsModule } from '../../components/components.module'\n\n@NgModule({\n  declarations: [\n    WellpumpPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(WellpumpPage),\n    ComponentsModule,\n  ],\n})\nexport class WellpumpPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/wellpump/wellpump.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events, ModalController } from 'ionic-angular';\nimport { Variable } from '../../providers/model/variable';\nimport { chartToolsProvider } from '../../providers/tools/chart';\nimport { DeviceRequestsProvider } from '../../providers/tools/requests';\n// import { WellpumpqueryPage } from '../wellpumpquery/wellpumpquery';\nimport { ToolsProvider } from '../../providers/tools/tools';\nimport { EnumDateType, EnumChartType } from '../../providers/model/enumdata';\n// import { TimerPumpPage } from '../timer/timer-pump/timer-pump';\n\n\n\n/**\n * Generated class for the WellpumpPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-wellpump',\n  templateUrl: 'wellpump.html',\n})\n\nexport class WellpumpPage {\n  id: string;\n  name: string;\n  f50Data: any;\n  f52Data: any;\n  state: boolean;\n  auto: boolean;\n\n  levelChart: any;\n  levelGuide: any;\n  levelData: any;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private events: Events,\n    private chart: chartToolsProvider,\n    private device: DeviceRequestsProvider,\n    private tools: ToolsProvider,\n    public modalCtrl: ModalController) {\n    this.id = this.navParams.get('id');\n    this.name = this.navParams.get('name');\n    let fn51Data = Variable.GetFnData('state');\n    this.getDeviceState(fn51Data);\n    this.events.subscribe(\"FnData:state\", this.eventsFn51Handler);\n\n    this.f50Data = Variable.GetFnData('50');\n    this.events.subscribe(\"FnData:50\", this.eventsFn50Handler);\n    this.auto = Variable.isAuto;\n    this.events.subscribe(\"FnData:isAuto\", this.eventsFnAutoHandler);\n  }\n  getDeviceState(data: any) {\n    if (data) {\n      this.state = data[this.id][0];\n    }\n  }\n  setDeviceState(state: string) {\n    Variable.socketObject.setDeviceState(this.id, this.name, state);\n  }\n\n  ionViewDidLoad() {\n    this.getWaterLevelChart();\n    this.getWaterlevelMapChart();\n  }\n  ionViewWillEnter() {\n\n  }\n  ionViewWillUnload() {\n    this.events.unsubscribe(\"FnData:50\", this.eventsFn50Handler);\n    this.events.unsubscribe(\"FnData:51\", this.eventsFn51Handler);\n    this.events.unsubscribe(\"FnData:52\", this.eventsFn52Handler);\n    this.events.unsubscribe(\"FnData:isAuto\", this.eventsFnAutoHandler);\n  }\n  changeData() {\n    this.levelGuide.position = [this.levelData[0].key, this.levelData[0].value];\n    this.levelGuide.content = this.levelData[0].value;\n    this.levelChart.changeData(this.levelData);\n    this.levelChart.repaint();\n  }\n  getWaterLevelChart() {\n    let fnData = Variable.GetFnData('52');\n    let value = this.getWaterlevelData(fnData);\n    this.levelData = [\n      { key: '', value: value, type: '井水液位' }\n    ];\n    let config = {\n      dw: 'm',\n      max: 200,\n      min: 0,\n      tooltip: false\n    };\n    this.levelChart = this.chart.getBarChart('mountNode', this.levelData, config);\n    this.levelGuide = this.levelChart.guide().text({\n      position: [0, 0],\n      content: 0,\n      style: {\n        // fill: color,\n        textBaseline: 'bottom'\n      },\n      offsetY: -5\n    });\n    this.changeData();\n\n    this.events.subscribe(\"FnData:52\", this.eventsFn52Handler);\n\n  }\n  getWaterlevelData(data: any) {\n    let temp = data['F529'];\n    if (temp) {\n      return temp * 1;\n    }\n  }\n  getWaterlevelMapChart() {\n\n    this.device.getEnergyQuery(-3).then((queryData: any) => {\n      let data = queryData[0];\n      let nowDateStr = this.tools.getNowDateStr(EnumDateType.Day);\n      let start = this.tools.getFullDateStr(nowDateStr, EnumDateType.Day);\n      let stop = this.tools.getAddDate(nowDateStr, EnumDateType.Day);\n      let params = {\n        MonitorID: data.F_MonitorID,\n        ObjType: data.F_SortIndex,\n        StartTime: start,\n        StopTime: stop,\n        // DateType: EnumDateType.Hour,\n        FnID: data.F_GPRSFnID\n      };\n      this.device.getWaterlevelMapChartData(params).then((res: any) => {\n        let config = {\n          dw: res.DW\n        }\n        this.chart.getLineChart('waterlevelChart', res.DataList, config);\n      });\n\n    });\n\n\n  }\n  goWellPumpQuery() {\n    this.navCtrl.push('WellpumpqueryPage', { queryID: -3, type: 'wp' })\n  }\n  presentShowModal() {\n    let profileModal = this.modalCtrl.create('TimerPumpPage', { name: this.name });\n    profileModal.onDidDismiss(data => {\n    });\n    profileModal.present();\n  }\n  /**start**/\n  private eventsFnAutoHandler = (data: any) => {\n    this.auto = data;\n  }\n  private eventsFn51Handler = (data: any) => {\n    this.getDeviceState(data);\n  }\n  private eventsFn50Handler = (data: any) => {\n    this.f50Data = data;\n  }\n  private eventsFn52Handler = (data: any) => {\n    let value = this.getWaterlevelData(data);\n    this.levelData[0].value = value;\n    this.changeData();\n\n  }\n  /**end***/\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/wellpump/wellpump.ts"],"sourceRoot":""}